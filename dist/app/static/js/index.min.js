"use strict";

$(function () {
  $(".list").mouseenter(function () {
    $(this).find($(".jiage")).toggle(false);
    $(this).find($(".goumai")).toggle(true);
  });
});
$(function () {
  $(".list").mouseleave(function () {
    $(this).find($(".jiage")).toggle(true);
    $(this).find($(".goumai")).toggle(false);
  });
});

var swipper = function () {
  var currentIndex = 0;
  var timer = null;
  console.log(1111);
  return {
    init: function init() {
      this.event();
      this.autoPlay();
      this.showImage(currentIndex);
    },
    event: function event() {
      var self = this;
      $(".banner-pre").click(function () {
        currentIndex--;
        self.showImage(currentIndex);
      });
      $(".banner-next").click(function () {
        currentIndex++;
        self.showImage(currentIndex);
      });
      $(".banner ol li").on("click", function () {
        //on函数里面的this直接指向触发事件的dom元素
        currentIndex = $(this).index();
        self.showImage(currentIndex);
      }); // console.log(index);
    },
    showImage: function showImage(index) {
      if (index < 0) {
        currentIndex = 2;
      }

      if (index > 2) {
        currentIndex = 0;
      }

      $(".banner ol li").eq(currentIndex).removeClass("banner-list-round banner-list-circle").addClass("banner-list-circle");
      $(".banner ol li").eq(currentIndex).siblings().removeClass("banner-list-round banner-list-circle").addClass("banner-list-round");
      $(".banner ul li").eq(currentIndex).css("z-index", "50");
      $(".banner ul li").eq(currentIndex).siblings().css("z-index", "0");
      $(".banner ul li").eq(currentIndex).fadeIn(800);
      $(".banner ul li").eq(currentIndex).siblings().fadeOut(500);
      this.autoPlay();
    },
    autoPlay: function autoPlay() {
      var self = this;
      clearInterval(timer);
      timer = setInterval(function (_) {
        currentIndex++;
        self.showImage(currentIndex);
      }, 5000);
    }
  };
}();

swipper.init(); // 关于banner图下六个图标的动画

$(".banner2-left").on("mouseenter", "i", function () {
  $(this).css("color", "#fff").siblings().css("color", "#c0c0bd");
  $(this).css("background-color", "#f35c49").siblings().css("background-color", "#f4f3ef");
  ;
});

var swiper = function () {
  /*当前页面展示的宽度*/
  var showWidth = 0;
  /*当前页面的索引*/

  var index = 0;
  return {
    init: function init(ele) {
      this.$ele = $(ele);
      showWidth = this.$ele.width();
      this.$ulWidth = $(ele).children('ul').width();
      this.$count = Math.floor(this.$ulWidth / showWidth);
      this.$list = $('.list');
      this.$contain = $('.contain');
      this.$prevBtn = $('.arrow-left');
      this.$nextBtn = $('.arrow-right');
      this.event();
    },
    event: function event() {
      var _this = this;

      this.$prevBtn.click(function () {
        if (index > 0) {
          index--;
          $(this).parent().children('.box').children('ul').css('left', -showWidth * index);
          $(this).parent().children('.arrow-right').css('display', 'block');
        }
      }); //用户名显示及退出登录功能

      $(".p .xiaohuangren").click(function () {
        if ($(".loginname").html() == "") {
          location.assign("login.html");
        } else {
          return false;
          preventDefault();
        }
      });
      $(".header .shop").click(function () {
        if ($(".loginname").html() == "") {
          window.location.assign("login.html");
        } else if (localStorage[$(".loginname").html()] == "") {
          window.location.assign("blank_shopcar.html");
        } else {
          window.location.assign("shop-car.html");
        }
      });
      $(".quit").click(function () {
        $(".loginname").html("");
        document.cookie = 'tel=$(".loginname").html();max-age=-1';
      });
      $(".loginname").html(document.cookie.split("=")[1]);
      $(".slide").on('mouseenter', 'li', function () {
        $(this).children('.list').stop().slideDown(300);
        $(this).children('.list').css("display", "block");
      });
      $('.slide').on('mouseleave', 'li', function () {
        $(this).children('.list').stop().slideUp(300);
      });
      this.$nextBtn.click(function () {
        if (index <= _this.$count) {
          index++;
          $(this).parent().children('.box').children(".Box").css('left', -showWidth * index);
          $(this).parent().children('.arrow-right').css('display', 'none');
          console.log(index);
          console.log(_this.$count);
        }
      });
    }
  };
}(); // swiper.init($('.box'));
//引入header标签


$("#header-wrap").load("common.html #wrapper", function () {
  swiper.init($('.box'));
});
$("#footer-wrap").load("common.html #footer");